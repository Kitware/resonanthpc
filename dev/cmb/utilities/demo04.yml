---
# build_attributes.py input for demo04

# Mesh
- type: mesh.resource
  name: domain
  items:
    - resource: model

# Region
- type: region.box
  name: computational domain
  items:
    - 'low coordinate': [0.0, 0.0, 0.0]
    - 'high coordinate': [10.0, 1.0, 10.0]

- type: region.plane
  name: east face
  items:
    - 'point':  [10.0, 1.0, 0.0]
    - 'normal': [1.0,  0.0, 0.0]

- type: region.plane
  name: west face
  items:
    - 'point':  [ 0.0, 0.0, 0.0]
    - 'normal': [-1.0, 0.0, 1.0]

- type: region.plane
  name: north face
  items:
    - 'point':  [10.0, 1.0, 0.0]
    - 'normal': [ 0.0, 1.0, 0.0]

- type: region.plane
  name: south face
  items:
    - 'point':  [0.0,  0.0, 0.0]
    - 'normal': [0.0, -1.0, 0.0]

- type: region.plane
  name: bottom face
  items:
    - 'point':  [0.0, 0.0,  0.0]
    - 'normal': [0.0, 0.0, -1.0]

- type: region.labeled.surface
  name: surface_east
  associate:
    - face: 6

- type: region.labeled.surface
  name: surface_west
  associate:
    - face: 7

- type: region.box.2d
  name: surface domain
  items:
    - 'low coordinate':  [ 0.0, 0.0]
    - 'high coordinate': [10.0, 1.0]

- type: region.plane.2d
  name: north edge
  items:
    - 'point': [10.0, 1.0]
    - 'normal': [0.0, 1.0]

- type: region.plane.2d
  name: south edge
  items:
    - 'point':  [0.0,  1.0]
    - 'normal': [0.0, -1.0]

- type: region.plane.2d
  name: east edge
  items:
    - 'point': [10.0, 1.0]
    - 'normal': [1.0, 0.0]

- type: region.plane.2d
  name: west edge
  items:
    - 'point':  [ 0.0, 0.0]
    - 'normal': [-1.0, 0.0]

# Mesh (surface)
- type: mesh.surface
  name: surface
  associate:
    - attribute: surface_east
    - attribute: surface_west

# Process Kernel
- type: pk-richards-flow
  name: flow
  items:
    - 'initial condition': computational domain
    - 'water retention evaluator': computational domain

- type: pk-overland-flow-pressure-basis
  name: overland flow

- type: pk-coupled-water
  name: surface-subsurface coupler
  associate:
    - attribute: flow
    - attribute: overland flow

# Coordinator (action = edit)
- action: edit
  type: cycle driver
  items:
    - name: end-spec
      children:
      - 'end time': 10.0
      - 'end time units': d
    - 'PK tree': surface-subsurface coupler

# Visualization
- type: visualization driver
  items:
    - 'domain': domain
    - 'file name base': visdump
    - name: 'visualization times'
      enable: true
      items:
        - name: times start period stop
          enable: true
          items:
            - 'Time Period': 10800.0
            - name: Stop Time
              enable: true
              value: -1.0

- type: visualization driver
  items:
    - 'domain': surface
    - 'file name base': visdump_surface
    - name: 'visualization times'
      enable: true
      items:
        - name: times start period stop
          enable: true
          items:
            - 'Time Period': 10800.0
            - name: Stop Time
              enable: true
              value: -1.0

# Checkpoint (not used)

# Observation (not used)

# State
# State field evaluators
- type: capillary pressure, atmospheric gas over liquid
  name: capillary_pressure_gas_liq

- type: compressible porosity
  name: porosity
  items:
    - region: computational domain

- type: effective_pressure
  name: effective_pressure

- type: effective_pressure
  name: surface-effective_pressure

- type: eos-constant
  name: molar_density_liquid
  items:
    - 'EOS basis': both
    - 'molar density key': molar_density_liquid
    - key: density [kg/m^3]
    - value: 1000

- type: eos-constant
  name: surface-mass_density_liquid
  items:
    - 'EOS basis': both
    - 'molar density key': surface-molar_density_liquid
    - 'mass density key': surface-mass_density_liquid
    - key: density [kg/m^3]
    - value: 1000

- type: eos-constant
  name: surface-molar_density_liquid
  items:
    - 'EOS basis': both
    - 'molar density key': surface-molar_density_liquid
    - 'mass density key': surface-mass_density_liquid
    - key: density [kg/m^3]
    - value: 1000

- type: eos-constant
  name: surface-source_molar_density
  items:
    - 'EOS basis': both
    - 'molar density key': surface-source_molar_density
    - 'mass density key': mass_density_liquid
    - key: density [kg/m^3]
    - value: 1000

- type: eos-vapor
  name: molar_density_gas
  items:
    - 'EOS basis': both
    - 'molar density key': molar_density_gas
    - 'mass density key': mass_density_gas

- type: independent variable
  name: base_porosity
  items:
    - value: 0.25
    - components: cell
    - region: computational domain

- type: independent variable
  name: permeability
  items:
    - value: 2.5e-12
    - components: cell
    - region: computational domain

- type: independent variable
  name: surface-manning_coefficient
  items:
    - value: 0.15
    - components: cell
    - region: surface domain

- type: independent variable
  name: surface-relative_permeability
  items:
    - value: 1.0
    - components: cell
    - region: surface domain

- type: independent variable
  name: surface-temperature
  items:
    - value: 274.65
    - components: cell
    - region: surface domain

- type: independent variable
  name: temperature
  items:
    - value: 274.65
    - components: cell,boundary_face
    - region: computational domain

- type: independent variable - function
  name: surface-mass_source
  items:
    - x-values: [0, 4.32e+7]
    - y-values: [3.0e-6, 0.0]
    - components: cell
    - region: surface domain

- type: molar fraction gas
  name: mol_frac_gas

- type: overland pressure water content
  name: surface-water_content

- type: ponded depth
  name: surface-ponded_depth

- type: ponded depth bar
  name: surface-ponded_depth_bar

- type: richards water content
  name: water_content

- type: viscosity
  name: viscosity_liquid

# State initial conditions
- type: ic-const-scalar
  name: atmospheric_pressure
  items:
    - value: 101325.0

- type: ic-const-vector
  name: gravity
  items:
    - value: [0.0, 0.0, -9.80665]
